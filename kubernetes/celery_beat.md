**Celery Beat** –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Kubernetes –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –∑–∞–¥–∞—á –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, –≥–¥–µ —Ç—Ä–µ–±—É–µ—Ç—Å—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∏–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤. –¢–∏–ø–∏—á–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—è –∏ –ø–æ–¥—Ö–æ–¥—ã –∫ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –≤–∫–ª—é—á–∞—é—Ç:

---

### **1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ**  
–í –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞—Ö Celery Beat —É–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–¥–∞—á–∞–º–∏, —Å–≤—è–∑–∞–Ω–Ω—ã–º–∏ —Å –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫–æ–º, –≤ –æ–¥–Ω–æ–º —Å–µ—Ä–≤–∏—Å–µ, –∞ –¥—Ä—É–≥–∏–µ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É—é—Ç —Å –æ—á–µ—Ä–µ–¥—å—é –∑–∞–¥–∞—á (–Ω–∞–ø—Ä–∏–º–µ—Ä, Redis –∏–ª–∏ RabbitMQ).  

- **–ü—Ä–∏–º–µ—Ä –∑–∞–¥–∞—á**:
  - –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π (email, push).
  - –û—á–∏—Å—Ç–∫–∞ —É—Å—Ç–∞—Ä–µ–≤—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö.
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é.
  - –°–±–æ—Ä –º–µ—Ç—Ä–∏–∫ –∏–ª–∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Å –≤–Ω–µ—à–Ω–∏–º–∏ API.

- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**:
  - Celery Beat –∑–∞–ø—É—â–µ–Ω –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π –ø–æ–¥.
  - Celery Worker'—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∑–∞–¥–∞—á–∏ –≤ –¥—Ä—É–≥–∏—Ö –ø–æ–¥–∞—Ö.
  - Message Broker (Redis/RabbitMQ) —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –≤ –≤–∏–¥–µ StatefulSet –∏–ª–∏ Managed Service.

---

### **2. –ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö**  
Celery –∏ Celery Beat —á–∞—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –≤ –æ–±—Ä–∞–±–æ—Ç–∫–µ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∏–ª–∏ ETL-–ø—Ä–æ—Ü–µ—Å—Å–∞—Ö.  

- **–°—Ü–µ–Ω–∞—Ä–∏–∏**:
  - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –≤–Ω–µ—à–Ω–µ–≥–æ API.
  - –û–±—Ä–∞–±–æ—Ç–∫–∞ –ª–æ–≥–æ–≤, –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –∏–ª–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤.
  - –û—á–∏—Å—Ç–∫–∞ –∏ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.

- **–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –≤ Kubernetes**:
  - **Auto-scaling Worker'–æ–≤**: –í–∫–ª—é—á–µ–Ω–∏–µ HPA (Horizontal Pod Autoscaler) –¥–ª—è worker'–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ –º–µ—Ç—Ä–∏–∫ CPU/–ø–∞–º—è—Ç–∏.
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CronJobs –≤ Kubernetes –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –∑–∞–¥–∞—á –≤–º–µ—Å—Ç–æ Celery Beat, –µ—Å–ª–∏ –∑–∞–¥–∞—á–∏ –ø—Ä–æ—Å—Ç—ã–µ.

---

### **3. –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º**  
DevOps-–∏–Ω–∂–µ–Ω–µ—Ä—ã —á–∞—Å—Ç–æ —Å–æ–∑–¥–∞—é—Ç –Ω–µ—Å–∫–æ–ª—å–∫–æ –æ—á–µ—Ä–µ–¥–µ–π –¥–ª—è –∑–∞–¥–∞—á —Å —Ä–∞–∑–Ω—ã–º —É—Ä–æ–≤–Ω–µ–º –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞.  

- **–ü—Ä–∏–º–µ—Ä**:
  - –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π.
  - –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫—ç—à–∞.
  - –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤.

- **–†–µ–∞–ª–∏–∑–∞—Ü–∏—è**:
  - Celery Beat —Ä–∞–∑–º–µ—â–∞–µ—Ç –∑–∞–¥–∞—á–∏ –≤ —Ä–∞–∑–Ω—ã–µ –æ—á–µ—Ä–µ–¥–∏ (high, medium, low).
  - Worker'—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è —Å –ø—Ä–∏–≤—è–∑–∫–æ–π –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–º –æ—á–µ—Ä–µ–¥—è–º:
    ```yaml
    command: ["celery", "-A", "tasks", "worker", "-Q", "high"]
    ```

---

### **4. –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–¥–∞—á**  
–î–ª—è DevOps –≤–∞–∂–Ω–æ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∑–∞–¥–∞—á Celery.  

- **–†–µ—à–µ–Ω–∏—è**:
  - **Flower**: –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—á–µ—Ä–µ–¥–µ–π –∏ –∑–∞–¥–∞—á.
  - **Prometheus + Grafana**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Celery –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –º–µ—Ç—Ä–∏–∫.
  - **ELK/EFK-—Å—Ç–µ–∫**: –î–ª—è –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫ –∑–∞–¥–∞—á.

---

### **5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ CI/CD**  
Celery Beat –º–æ–∂–µ—Ç –±—ã—Ç—å —á–∞—Å—Ç—å—é CI/CD –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏, –Ω–∞–ø—Ä–∏–º–µ—Ä:
- –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (stress testing).
- –û—á–∏—Å—Ç–∫–∞ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø–∞–π–ø–ª–∞–π–Ω–æ–≤.
- –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –±–∏–ª–¥–æ–≤ –∏–ª–∏ —Ä–µ–ª–∏–∑–æ–≤.

---

### **6. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ "–ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–π –ø–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ + API"**  
–í –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö –ø—Ä–æ–µ–∫—Ç–∞—Ö Celery Beat –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Å–æ–±—ã—Ç–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –∑–∞—Ç–µ–º –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è API –≤ –¥—Ä—É–≥–∏—Ö –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–∞—Ö.

- **–ü—Ä–∏–º–µ—Ä**:
  - Celery Beat –∑–∞–ø—É—Å–∫–∞–µ—Ç –∑–∞–¥–∞—á—É –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É.
  - –≠—Ç–∞ –∑–∞–¥–∞—á–∞ –≤—ã–∑—ã–≤–∞–µ—Ç API, –∫–æ—Ç–æ—Ä—ã–π –∏–Ω–∏—Ü–∏–∏—Ä—É–µ—Ç —Å–ª–æ–∂–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å (–Ω–∞–ø—Ä–∏–º–µ—Ä, –∞–≥—Ä–µ–≥–∞—Ü–∏—é –¥–∞–Ω–Ω—ã—Ö).

---

### **–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –≤ Kubernetes**  
1. **–í—ã—Å–æ–∫–∞—è –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**:
   - –ü–æ–¥—ã –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–∏ —Å–±–æ—è—Ö.
   - –ë—Ä–æ–∫–µ—Ä –æ—á–µ—Ä–µ–¥–µ–π (Redis/RabbitMQ) –º–æ–∂–µ—Ç –±—ã—Ç—å —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∫–∞–∫ –∫–ª–∞—Å—Ç–µ—Ä.

2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**:
   - –ü—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ worker'–æ–≤ —á–µ—Ä–µ–∑ HPA –∏–ª–∏ —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–µ–ø–ª–∏–∫.

3. **–ì–∏–±–∫–æ—Å—Ç—å**:
   - –†–∞–∑–Ω—ã–µ –∑–∞–¥–∞—á–∏ –º–æ–∂–Ω–æ —Ä–∞–∑–¥–µ–ª—è—Ç—å –ø–æ –æ—Ç–¥–µ–ª—å–Ω—ã–º –æ—á–µ—Ä–µ–¥—è–º –∏–ª–∏ worker'–∞–º.

4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —ç–∫–æ—Å–∏—Å—Ç–µ–º–æ–π Kubernetes**:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ConfigMaps –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–π.
   - –°–µ–∫—Ä–µ—Ç—ã (Secrets) –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.

---

### **–ü–æ—á–µ–º—É –∏—Å–ø–æ–ª—å–∑—É—é—Ç Celery Beat, –∞ –Ω–µ Kubernetes CronJobs?**
- **Celery Beat** —É–¥–æ–±–Ω–µ–µ, –µ—Å–ª–∏:
  - –ù—É–∂–Ω–æ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —É–ø—Ä–∞–≤–ª—è—Ç—å —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º –∑–∞–¥–∞—á (–¥–æ–±–∞–≤–ª—è—Ç—å/—É–¥–∞–ª—è—Ç—å/–∏–∑–º–µ–Ω—è—Ç—å).
  - –ë–æ–ª—å—à–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–¥–∞—á —Å —Ä–∞–∑–Ω—ã–º–∏ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞–º–∏.
  - –ó–∞–¥–∞—á–∏ —Ç–µ—Å–Ω–æ —Å–≤—è–∑–∞–Ω—ã —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –æ—á–µ—Ä–µ–¥–µ–π (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞).

- **Kubernetes CronJobs** —É–¥–æ–±–Ω–µ–µ, –µ—Å–ª–∏:
  - –ó–∞–¥–∞—á–∏ –ø—Ä–æ—Å—Ç—ã–µ –∏ –Ω–µ —Ç—Ä–µ–±—É—é—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –±—Ä–æ–∫–µ—Ä–æ–º.
  - –ù–∏–∑–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–Ω–∞–ø—Ä–∏–º–µ—Ä, —Ä–∞–∑ –≤ –¥–µ–Ω—å).

---



–í–æ—Ç –ø—Ä–∏–º–µ—Ä –º–∞–Ω–∏—Ñ–µ—Å—Ç–æ–≤ Kubernetes –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è **Celery Beat** —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Redis, Celery Worker –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Å –ø–æ–º–æ—â—å—é Flower. –í—Å–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã —Å–Ω–∞–±–∂–µ–Ω—ã –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏ –¥–ª—è –ª—É—á—à–µ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è.  

---

### **1. Redis (Message Broker)**
Redis –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ –∫–∞—á–µ—Å—Ç–≤–µ –±—Ä–æ–∫–µ—Ä–∞ –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –∑–∞–¥–∞—á.  

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: redis
  labels:
    app: redis
spec:
  replicas: 1 # –û–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä Redis –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
  selector:
    matchLabels:
      app: redis
  template:
    metadata:
      labels:
        app: redis
    spec:
      containers:
      - name: redis
        image: redis:6.2 # –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ Redis
        ports:
        - containerPort: 6379 # –ü–æ—Ä—Ç Redis –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
---
apiVersion: v1
kind: Service
metadata:
  name: redis
  labels:
    app: redis
spec:
  ports:
  - port: 6379
    targetPort: 6379
  selector:
    app: redis
```

---

### **2. Celery Worker**
Celery Worker –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–¥–∞—á–∏ –∏–∑ –æ—á–µ—Ä–µ–¥–∏.  

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: celery-worker
  labels:
    app: celery-worker
spec:
  replicas: 3 # –¢—Ä–∏ –≤–æ—Ä–∫–µ—Ä–∞ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏
  selector:
    matchLabels:
      app: celery-worker
  template:
    metadata:
      labels:
        app: celery-worker
    spec:
      containers:
      - name: worker
        image: my-celery-image:latest # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–π Docker-–æ–±—Ä–∞–∑
        command: ["celery", "-A", "myapp", "worker", "--loglevel=info"] # –ó–∞–ø—É—Å–∫ Celery Worker
        env:
        - name: CELERY_BROKER_URL
          value: redis://redis:6379/0 # URL –±—Ä–æ–∫–µ—Ä–∞ Redis
```

---

### **3. Celery Beat**
Celery Beat –ø–ª–∞–Ω–∏—Ä—É–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á.  

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: celery-beat
  labels:
    app: celery-beat
spec:
  replicas: 1 # Beat –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è
  selector:
    matchLabels:
      app: celery-beat
  template:
    metadata:
      labels:
        app: celery-beat
    spec:
      containers:
      - name: beat
        image: my-celery-image:latest # –ó–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ —Å–≤–æ–π Docker-–æ–±—Ä–∞–∑
        command: ["celery", "-A", "myapp", "beat", "--loglevel=info"] # –ó–∞–ø—É—Å–∫ Celery Beat
        env:
        - name: CELERY_BROKER_URL
          value: redis://redis:6379/0 # URL –±—Ä–æ–∫–µ—Ä–∞ Redis
        volumeMounts:
        - name: beat-schedule # –î–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—è –∑–∞–¥–∞—á
          mountPath: /app/celerybeat-schedule
      volumes:
      - name: beat-schedule
        emptyDir: {}
```

---

### **4. Flower (–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥)**
Flower –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ Celery.  

```yaml
apiVersion: apps/v1
kind: Deployment
metadata:
  name: flower
  labels:
    app: flower
spec:
  replicas: 1 # –û–¥–∏–Ω —ç–∫–∑–µ–º–ø–ª—è—Ä –¥–ª—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
  selector:
    matchLabels:
      app: flower
  template:
    metadata:
      labels:
        app: flower
    spec:
      containers:
      - name: flower
        image: mher/flower:latest # –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π –æ–±—Ä–∞–∑ Flower
        args: ["--broker=redis://redis:6379/0"] # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±—Ä–æ–∫–µ—Ä—É Redis
        ports:
        - containerPort: 5555 # –ü–æ—Ä—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ Flower
---
apiVersion: v1
kind: Service
metadata:
  name: flower
  labels:
    app: flower
spec:
  type: NodePort # –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Flower —Å–Ω–∞—Ä—É–∂–∏ –∫–ª–∞—Å—Ç–µ—Ä–∞
  ports:
  - port: 5555
    targetPort: 5555
    nodePort: 30555 # –ü—Ä–∏–≤—è–∑–∫–∞ –ø–æ—Ä—Ç–∞ –Ω–∞ —É–∑–ª–µ
  selector:
    app: flower
```

---

### **5. ConfigMap –¥–ª—è –∑–∞–¥–∞—á Celery**
–ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–º–∏ –∑–∞–¥–∞—á–∞–º–∏ –¥–ª—è Celery Beat.  

```yaml
apiVersion: v1
kind: ConfigMap
metadata:
  name: celery-config
  labels:
    app: celery
data:
  celery.py: |
    from celery import Celery
    from celery.schedules import crontab

    app = Celery('myapp', broker='redis://redis:6379/0')

    app.conf.beat_schedule = {
        'task-every-minute': {
            'task': 'myapp.tasks.some_task',  # –ò–º—è –∑–∞–¥–∞—á–∏
            'schedule': crontab(minute='*/1'),  # –ó–∞–ø—É—Å–∫ –∫–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É
        },
    }
    app.conf.timezone = 'UTC'
```

---

### **6. Ingress –¥–ª—è Flower**
–î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Flower —á–µ—Ä–µ–∑ DNS –∏–ª–∏ –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è.  

```yaml
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: flower-ingress
  annotations:
    nginx.ingress.kubernetes.io/rewrite-target: /
spec:
  rules:
  - host: flower.example.com # –î–æ–º–µ–Ω –¥–ª—è Flower
    http:
      paths:
      - path: /
        pathType: Prefix
        backend:
          service:
            name: flower
            port:
              number: 5555
```

---

### **–ö–∞–∫ —ç—Ç–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç—å?**
1. –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∞–Ω–∏—Ñ–µ—Å—Ç—ã:
   ```bash
   kubectl apply -f redis.yaml
   kubectl apply -f celery-worker.yaml
   kubectl apply -f celery-beat.yaml
   kubectl apply -f flower.yaml
   kubectl apply -f celery-config.yaml
   kubectl apply -f flower-ingress.yaml
   ```
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ –ø–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç:
   ```bash
   kubectl get pods
   ```

---

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å —á—Ç–æ-—Ç–æ —Å–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–æ–µ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å Prometheus/Grafana), –¥–∞–π—Ç–µ –∑–Ω–∞—Ç—å! üòä